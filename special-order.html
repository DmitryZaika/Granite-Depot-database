<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Special Order Calculator</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <!-- Header with logo and navigation -->
    <header>
      <div class="logo">
        <a href="index.html"
          ><img src="./images/logo_gd_main.webp" alt="Logo"
        /></a>
      </div>
      <nav class="main-nav">
        <ul class="main-nav_list">
          <li><a href="index.html">Database</a></li>
          <li><a href="instructions.html">Instructions</a></li>
          <li><a href="special-order.html">Special order</a></li>
          <li><a href="customers.html">Customers</a></li>
        </ul>
      </nav>
      <div class="search">
        <input id="searchInput" type="text" placeholder="Search..." />
        <ul id="searchResults" class="search-results hidden"></ul>
      </div>
    </header>

    <!-- Main content area -->
    <main>
      <h1>Special Order Calculator</h1>
      <div class="calculator-container">
        <label for="price-per-sqft">Price per Sqft:</label>
        <input
          type="number"
          id="price-per-sqft"
          placeholder="Enter price per sqft"
        />

        <label for="size">Size of Slab:</label>
        <div class="row">
          <input
            type="number"
            id="width"
            placeholder="Width (inches)"
            min="0"
          />
          <input
            type="number"
            id="length"
            placeholder="Length (inches)"
            min="0"
          />
        </div>

        <div class="slabs-counter">
          <label for="slabs">Slabs:</label>
          <button type="button" id="decrease-slabs">-</button>
          <span id="slabs-amount">1</span>
          <button type="button" id="increase-slabs">+</button>
        </div>

        <div class="result">
          Cost per Sqft $<span id="cost-per-sqft">0.00</span> per sqft
        </div>
        <div class="result">
          Total Square Feet: <span id="total-square-feet">0.00</span> sqft
        </div>
        <div class="result-total">
          Total Cost $<span id="total-cost">0.00</span>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer>
      <p>&copy; 2024 Training Program. All rights reserved.</p>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const pricePerSqftInput = document.getElementById("price-per-sqft");
        const widthInput = document.getElementById("width");
        const lengthInput = document.getElementById("length");
        const slabsAmountElement = document.getElementById("slabs-amount");
        const totalSquareFeetElement =
          document.getElementById("total-square-feet");
        const totalCostElement = document.getElementById("total-cost");
        const costPerSqftElement = document.getElementById("cost-per-sqft");

        let slabsAmount = 1;
        const taxRate = 0.07; // 7% налог

        // Обработчики событий для кнопок + и -
        document
          .getElementById("increase-slabs")
          .addEventListener("click", function () {
            slabsAmount++;
            slabsAmountElement.textContent = slabsAmount;
            calculateTotal();
          });

        document
          .getElementById("decrease-slabs")
          .addEventListener("click", function () {
            if (slabsAmount > 1) {
              slabsAmount--;
              slabsAmountElement.textContent = slabsAmount;
              calculateTotal();
            }
          });

        // Функция для расчета общей стоимости и площади слэба
        function calculateTotal() {
          const pricePerSqft = parseFloat(pricePerSqftInput.value) || 0;
          const width = parseFloat(widthInput.value) || 0;
          const length = parseFloat(lengthInput.value) || 0;

          const areaPerSlab = (width * length) / 144; // Размер в квадратных футах
          const totalSquareFeet = areaPerSlab * slabsAmount;
          totalSquareFeetElement.textContent = totalSquareFeet.toFixed(2);

          // Рассчитать стоимость материала с учетом налога
          const materialCost =
            areaPerSlab * pricePerSqft * slabsAmount * (1 + taxRate);

          // Общая стоимость с учетом доставки
          const deliveryFee = slabsAmount * 30; // $30 за каждый слэб
          const totalCost = materialCost + deliveryFee;

          totalCostElement.textContent = totalCost.toFixed(2);

          // Стоимость за квадратный фут с учетом налога и доставки
          const costPerSqftWithDelivery = totalCost / totalSquareFeet;
          costPerSqftElement.textContent = isFinite(costPerSqftWithDelivery)
            ? costPerSqftWithDelivery.toFixed(2)
            : "0.00";
        }

        // Автоматический перерасчет при изменении ввода
        pricePerSqftInput.addEventListener("input", calculateTotal);
        widthInput.addEventListener("input", calculateTotal);
        lengthInput.addEventListener("input", calculateTotal);
      });
    </script>
  </body>
</html>
